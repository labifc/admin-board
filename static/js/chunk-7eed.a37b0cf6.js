(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7eed","chunk-0dda"],{"2WM5":function(e,t,n){"use strict";n.r(t);var a=n("fkDD"),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,function(){return a[e]})}(o);t.default=r.a},"96yN":function(e,t,n){"use strict";var a=n("tOIj");n.n(a).a},D6XY:function(e,t,n){"use strict";n.r(t);var a=n("QDRA"),r=n("2WM5");for(var o in r)"default"!==o&&function(e){n.d(t,e,function(){return r[e]})}(o);n("96yN");var i=n("KHd+"),c=Object(i.a)(r.default,a.a,a.b,!1,null,"447939e2",null);c.options.__file="index.vue",t.default=c.exports},QDRA:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tree-select-wrap"},[n("div",{attrs:{id:"leftSidebarWrap"}},[n("div",{attrs:{id:"dndPanel"}},[n("el-tree",{ref:"treeEle",attrs:{data:e.treeData,"default-expand-all":e.isExpandAll,"default-expanded-keys":e.expandedArr,"default-checked-keys":e.checkedArr,props:e.defaultProps,"filter-node-method":e.filterNode,"show-checkbox":"","node-key":"id","highlight-current":""}})],1),e._v(" "),n("div",{staticClass:"top btn-group"},[n("el-button",{attrs:{type:"text"},on:{click:e.getCheckedNodes}},[e._v("生成")]),e._v(" "),n("el-button",{attrs:{type:"text"},on:{click:e.resetCheckedNodes}},[e._v("重置")]),e._v(" "),n("div",{staticClass:"search-wrap"},[n("el-input",{attrs:{placeholder:"输入关键字过滤",clearable:"","suffix-icon":"el-icon-search",size:"mini"},model:{value:e.filterText,callback:function(t){e.filterText="string"==typeof t?t.trim():t},expression:"filterText"}})],1)],1),e._v(" "),n("div",{staticClass:"bottom btn-group"},[n("el-button",{attrs:{type:"text"},on:{click:e.addNewLeafNode}},[e._v("添加")])],1)]),e._v(" "),n("selectTaskDialog",{ref:"selectTaskEle"})],1)},r=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r})},QkPc:function(e,t,n){"use strict";n.r(t);var a=n("YuB6"),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,function(){return a[e]})}(o);t.default=r.a},YIw9:function(e,t,n){"use strict";n.r(t);var a=n("i1Mo"),r=n("QkPc");for(var o in r)"default"!==o&&function(e){n.d(t,e,function(){return r[e]})}(o);n("pYbe");var i=n("KHd+"),c=Object(i.a)(r.default,a.a,a.b,!1,null,"3fe2b219",null);c.options.__file="select-task.vue",t.default=c.exports},YuB6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"SelectTaskDialog",data:function(){return{}},methods:{setOption:function(e){console.log("opts: ",e)}}}},fkDD:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=c(n("P2sY")),r=c(n("HFE+")),o=n("zkGU"),i=c(n("YIw9"));function c(e){return e&&e.__esModule?e:{default:e}}t.default={name:"TreeSelectWrap",components:{selectTaskDialog:i.default},data:function(){return{filterText:"",treeData:[],defaultProps:{children:"children",label:"label"},isExpandAll:!1,expandedArr:[],checkedArr:[]}},watch:{filterText:function(e){this.$refs.treeEle.filter(e),this.resetCheckedNodes()}},created:function(){this.getTreeData()},methods:{getTreeData:function(){var e=this;this.$http("/local/yfiles/getTree/").then(function(t){var n=t.data;n=e.handleData(n),e.treeData=n})},handleData:function(e){return this.travelTree(e,function(e,t){t&&(e.figure=(0,a.default)({},t.figure,e.figure),e.tag=(0,a.default)({},o.baseInfoTag,t.tag,e.tag))}),e},travelTree:function(e,t,n){var a=e;if(a&&a instanceof Array&&!(!a.length>0))if("function"==typeof t){var r=n,o=this;a.forEach(function(e){t(e,r);var n=e.children;o.travelTree(n,t,e)})}else console.log("callback不是个函数，故不会进行遍历！")},getCheckedNodes:function(){var e=this.$refs.treeEle.getCheckedNodes(!0);console.log("arr: ",e),0!==e.length?e.forEach(function(e){r.default.createGraphNode(e)}):this.$message.warning("您没有选中任何节点哦，所以不会生成任何元素！")},resetCheckedNodes:function(){this.$refs.treeEle.setCheckedKeys([])},filterNode:function(e,t){return!e||t.label.includes(e)},addNewLeafNode:function(){var e=this;this.$refs.selectTaskEle.setOption({title:"选择任务作业",isShow:!0,url:"/page/icontrol/pkgEdit/select-task.jsp",onOpened:function(e){console.log("对话框打开了")},onLoad:function(e){console.log("iframe加载完成了"),console.log("iframeEle: ",e);var t=e.contentWindow;console.log("win.location: ",t.location);t.SetData({action:"get",taskType:"job_%"})},onConfirm:function(t){console.log("用户点击了确定按钮"),console.log("iframeEle: ",t);var n=[];t.contentWindow.GetData().forEach(function(e){n.push(e.uuid)}),e.$http("/yfilejsondata/getTaskTagInfo",{params:{taskuuids:n.join(",")}}).then(function(t){var n=t.data;e.pushNewNode(n)})},onCancel:function(){console.log("用户点击了取消按钮")}})},pushNewNode:function(e){var t=this.treeData.find(function(e){return"DataStage"===e.label}),n=[];e.forEach(function(e){e.tag=(0,a.default)({},o.baseInfoTag,e),e.figure=(0,a.default)({},t.figure,e.figure),n.push(e)}),t.children=t.children.concat(n)}}}},hqzY:function(e,t,n){},i1Mo:function(e,t,n){"use strict";var a=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"select-task-dialog"})},r=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r})},pYbe:function(e,t,n){"use strict";var a=n("hqzY");n.n(a).a},tOIj:function(e,t,n){}}]);